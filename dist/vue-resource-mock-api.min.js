/*!
 * vue-resource-mock-api v0.1.1 
 * (c) 2017 Jerez Bain
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("url-pattern"),require("qs")):"function"==typeof define&&define.amd?define(["url-pattern","qs"],t):e.VueResourceMockApi=t(e.UrlPattern,e.qs)}(this,function(e,t){"use strict";function r(r,n){var o,s="[vue-resource-mock] ",u=this.mockMATCH_OPTIONS,a=function(t){return Object.keys(t).reduce(function(r,n){var o=n.split(" "),s=o[0],a=o[1],i=t[n];switch(i.constructor.name){case"Function":r.push({method:s,pattern:new e(a,u),handler:i});break;case"Object":r.push({method:s,pattern:new e(a,u),handler:function(){return{body:i,status:200}}});break;case"Number":if(!Number.isInteger(i)||i<200||i>599)throw new Error(i+" is not a valid Http Status Code");r.push({method:s,pattern:new e(a,u),handler:function(){return{body:void 0,status:200}}});break;default:throw new Error("Routes must be an Object or Function or number(status code)")}return r},[])},i=a(this.mockAPI),c=r.url.split("?"),p=c[0],d=c[1];if(r.url.indexOf("{/")!==-1){for(var h in r.params)r.params.hasOwnProperty(h)&&"string"==typeof r.params[h]&&(o=new RegExp("({/"+h+"})"),p=p.replace(o,"/"+r.params[h]));o=new RegExp("({/["+u.segmentValueCharset+"]+})","g"),p=p.replace(o,"")}var l=i.filter(function(e){return e.matchResult=e.pattern.match(p),r.method.toLowerCase()===e.method.toLowerCase()&&!!e.matchResult});if(0===l.length)console.warn(s+"Request pass through: "+r.url),n();else{console.info(s+"Request served with mock: "+r.url);var f=l[0].handler(l[0].matchResult,t.parse(d),r);f.delay?setTimeout(function(){return n(r.respondWith(f.body,f))},f.delay):n(r.respondWith(f.body,f))}}function n(e,t){for(var r=Object.keys(t),o=0;o<r.length;o+=1){var s=t[r[o]];e[r[o]]=["string","number","array","boolean"].indexOf(typeof s)===-1?n(e[r[o]]||{},s):s}return e}e="default"in e?e.default:e,t="default"in t?t.default:t,r.version="0.1.1";var o={install:function(e,t){if(!e.http)throw new Error('[vue-resource] is not found. Make sure it is imported and "Vue.use" it before vue-resource-mock');e.prototype.mockAPI=t.hasOwnProperty("routes")?t.routes:t;var o={segmentValueCharset:"a-zA-Z0-9.-_%"};t.hasOwnProperty("matchOptions")&&n(o,t.matchOptions),e.prototype.mockMATCH_OPTIONS=o,e.http.interceptors.push(r)}};return o});